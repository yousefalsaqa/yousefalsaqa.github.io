<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terrabot CO2 Mapper | Yousef Alsaqa</title>
  <meta name="description" content="Case study: Autonomous robot for indoor CO2 mapping using SLAM and air quality sensors.">
  <meta name="theme-color" content="#050508">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

  <!-- Stylesheets -->
  <link href="css/theme.css" rel="stylesheet">
  <link href="css/pages/case-study.css" rel="stylesheet">
</head>

<body>
  <!-- Header -->
  <header class="header" id="header">
    <div class="header-inner">
      <a href="index.html" class="header-logo">Yousef<span>.</span></a>
      <nav class="header-nav" id="nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="projects.html" class="nav-link">Projects</a>
        <a href="experience.html" class="nav-link">Experience</a>
        <a href="mailto:21ymsa@queensu.ca" class="nav-link">Contact</a>
      </nav>
      <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="case-hero">
      <div class="container">
        <a href="projects.html" class="back-link">
          <i class="bi bi-arrow-left"></i>
          Back to projects
        </a>
        <h1>Terrabot CO2 Mapper</h1>
        <p class="subtitle">A robot that maps indoor CO2 distribution in real-time — and the project where I fell in love with system integration.</p>
        
        <div class="case-meta">
          <div class="case-meta-item">
            <span class="case-meta-label">Role</span>
            <span class="case-meta-value">Software & Integration Lead</span>
          </div>
          <div class="case-meta-item">
            <span class="case-meta-label">Timeline</span>
            <span class="case-meta-value">Jan 2023 — May 2023</span>
          </div>
          <div class="case-meta-item">
            <span class="case-meta-label">Course</span>
            <span class="case-meta-value">MREN 203 Design</span>
          </div>
          <div class="case-meta-item">
            <span class="case-meta-label">Platform</span>
            <span class="case-meta-value">ROS + Raspberry Pi</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Content -->
    <section class="section">
      <div class="container case-content">
        
        <div class="case-section">
          <h2>The Problem</h2>
          <p>Indoor air quality matters. High CO2 levels cause drowsiness, reduced cognitive function, and discomfort. Building managers need to know where ventilation is inadequate, but manual air quality surveys are:</p>
          <ul>
            <li>Time-consuming (walking around with a handheld sensor)</li>
            <li>Incomplete (you can't be everywhere)</li>
            <li>Inconsistent (different times, different conditions)</li>
          </ul>
          <p>Q-PMC (a fictional client for our course project) needed an automated solution that could map an entire floor's CO2 distribution overnight.</p>
        </div>

        <figure class="case-image">
          <img src="assets/203_Rover.jpg" alt="Terrabot autonomous robot">
          <figcaption>Terrabot ready for deployment with LiDAR and CO2 sensor mounted</figcaption>
        </figure>

        <div class="case-section">
          <h2>The Solution</h2>
          <p>We built a custom robot from scratch — a square chassis with four wheels, carrying LiDAR for mapping, a CO2 sensor for air quality, and proximity sensors for obstacle avoidance. Manual control via a game controller, with all the sensor data feeding into ROS for real-time visualization.</p>
          
          <h3>The System</h3>
          <p>What made this project special wasn't any single component — it was getting them all to work together:</p>
          <ul>
            <li><strong>SLAM:</strong> Building a map of the room while tracking the robot's position</li>
            <li><strong>CO2 sensing:</strong> Logging air quality values with location data</li>
            <li><strong>Proximity sensors:</strong> Obstacle detection for safety</li>
            <li><strong>Controller integration:</strong> Mapping a game controller for manual navigation (which I had to configure and integrate myself)</li>
            <li><strong>Live visualization:</strong> Real-time map display with CO2 overlay</li>
          </ul>
          <p>All of this running in ROS, with nodes talking to each other, data flowing between subsystems. When it finally worked — when I could drive the robot around and watch the map build itself with CO2 values updating live — that was the moment I understood why system integration is its own discipline.</p>
        </div>

        <figure class="case-image">
          <img src="assets/SystemArchitecture.png" alt="System architecture diagram">
          <figcaption>System architecture showing ROS nodes and data flow</figcaption>
        </figure>

        <div class="case-section">
          <h2>SLAM Implementation</h2>
          <p>We used Hector SLAM, a ROS package that works with 2D LiDAR without wheel odometry. This was critical because our budget platform had significant wheel slip.</p>
          
          <h3>Why Hector SLAM</h3>
          <ul>
            <li><strong>No odometry required:</strong> Relies purely on scan matching, not wheel encoders</li>
            <li><strong>Real-time capable:</strong> Runs at 40Hz on Raspberry Pi 4</li>
            <li><strong>Indoor optimized:</strong> Designed for structured environments with walls and corners</li>
          </ul>

          <div class="case-code">
<pre>
# Launch file configuration for Hector SLAM
hector_mapping:
  ros__parameters:
    map_resolution: 0.05  # 5cm grid cells
    map_size: 2048        # ~100m x 100m max
    map_update_distance_thresh: 0.4
    map_update_angle_thresh: 0.06
    laser_z_min_value: -0.25
    laser_z_max_value: 0.25
</pre>
          </div>

          <h3>Localization Accuracy</h3>
          <p>We achieved reasonable position accuracy in typical indoor environments.</p> <!-- [ADD YOUR ACTUAL ACCURACY AND OBSERVATIONS] -->
        </div>

        <div class="case-image-grid">
          <figure class="case-image">
            <img src="SLAMmap.png" alt="SLAM-generated room map">
            <figcaption>Room map generated by Hector SLAM</figcaption>
          </figure>
          <figure class="case-image">
            <img src="assets/CO2.png" alt="CO2 heatmap overlay">
            <figcaption>CO2 concentration heatmap overlay</figcaption>
          </figure>
        </div>

        <div class="case-section">
          <h2>Hardware Stack</h2>
          
          <div class="tech-grid">
            <div class="tech-item">
              <h4>Raspberry Pi</h4>
              <p>Main computer running ROS and all processing</p>
            </div>
            <div class="tech-item">
              <h4>LiDAR</h4>
              <p>360° scanning for SLAM mapping</p>
            </div>
            <div class="tech-item">
              <h4>CO2 Sensor</h4>
              <p>Air quality measurements with location tagging</p>
            </div>
            <div class="tech-item">
              <h4>Proximity Sensors</h4>
              <p>Obstacle detection for collision avoidance</p>
            </div>
            <div class="tech-item">
              <h4>Game Controller</h4>
              <p>Manual navigation input (mapped and integrated)</p>
            </div>
            <div class="tech-item">
              <h4>Custom Chassis</h4>
              <p>Square frame with 4-wheel drive</p>
            </div>
          </div>

          <h3>Power System</h3>
          <p>A 4S LiPo battery powers the drive motors directly. A buck converter steps down to 5V for the Raspberry Pi and sensors. Total runtime: approximately 2 hours continuous operation.</p>
        </div>

        <div class="case-section">
          <h2>Path Planning</h2>
          <p>For complete coverage, we implemented a boustrophedon (lawn mower) pattern with obstacle avoidance using Dijkstra's algorithm.</p>
          
          <div class="case-code">
<pre>
def generate_coverage_path(occupancy_map, robot_width):
    """Generate boustrophedon path for complete coverage."""
    path = []
    row_spacing = robot_width * 0.8  # 20% overlap
    
    direction = 1  # 1 = right, -1 = left
    for y in range(0, map_height, row_spacing):
        row_start = 0 if direction == 1 else map_width
        row_end = map_width if direction == 1 else 0
        
        # Find unoccupied cells in this row
        for x in range(row_start, row_end, direction):
            if is_navigable(occupancy_map, x, y):
                path.append((x, y))
        
        direction *= -1  # Reverse for next row
    
    return path
</pre>
          </div>
        </div>

        <div class="case-section">
          <h2>Heatmap Generation</h2>
          <p>Raw CO2 samples are sparse — maybe one reading every 20cm of travel. We interpolated between samples using inverse distance weighting:</p>
          
          <div class="case-code">
<pre>
def interpolate_heatmap(samples, resolution=0.1):
    """Generate continuous heatmap from sparse samples."""
    grid = np.zeros((height, width))
    
    for y in range(height):
        for x in range(width):
            distances = []
            values = []
            
            for sample in samples:
                d = np.sqrt((x - sample.x)**2 + (y - sample.y)**2)
                if d < max_influence_distance:
                    distances.append(d)
                    values.append(sample.co2)
            
            if distances:
                weights = 1.0 / (np.array(distances) + 0.01)
                grid[y, x] = np.average(values, weights=weights)
    
    return grid
</pre>
          </div>
        </div>

        <div class="case-section">
          <h2>Results</h2>
          <p>It worked. The robot drove around, the map built itself in real-time, and CO2 values populated as colored overlays showing air quality across the space. You could actually see where ventilation was good and where it wasn't.</p>
          
          <p>For a second-year design course project, getting all those systems integrated and running together was the real victory. The images above show actual outputs from our testing — the SLAM-generated map and the CO2 heatmap overlay.</p>
        </div>
        </div>

        <div class="case-section">
          <h2>The Moment It Clicked</h2>
          <p>This was my first real system integration project. Before this, I'd built individual components — a motor controller here, a sensor reading there. But Terrabot was the first time I had to make multiple independent systems work together in real-time.</p>
          <p>The SLAM node publishing maps. The CO2 node publishing readings. The controller node publishing movement commands. The visualization node subscribing to all of them. Each piece worked in isolation, but making them work together — that was a different challenge entirely.</p>
          <p>When it finally came together, I got it. This is what engineering actually is: not building components, but building systems. That realization shaped everything I did after — Formula SAE, AutoDrive, the capstone project. Integration is where the real work happens.</p>
        </div>

        <div class="case-section">
          <h2>What I Learned</h2>
          <ul>
            <li><strong>Integration is its own skill.</strong> Making things work together is harder than making them work alone. ROS helped, but the mental model of nodes-and-messages took time to internalize.</li>
            <li><strong>Test subsystems independently.</strong> We wasted hours debugging integration issues that were actually single-node bugs. Test each piece first.</li>
            <li><strong>ROS is powerful but opinionated.</strong> Once you understand the publisher/subscriber model, it makes complex systems manageable. But there's a learning curve.</li>
          </ul>
        </div>

        <nav class="case-nav">
          <a href="eii-project-details.html">
            <i class="bi bi-arrow-left"></i>
            Energy Intensity Predictor
          </a>
          <a href="rexcubot-details.html">
            Next: Rexcubot Competition Bot
            <i class="bi bi-arrow-right"></i>
          </a>
        </nav>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-main">
          <h2>Let's talk.</h2>
          <p>I'm looking for full-time opportunities in robotics, automation, or anywhere I can build things that matter.</p>
          <a href="mailto:21ymsa@queensu.ca" class="footer-email">
            <i class="bi bi-envelope"></i>
            21ymsa@queensu.ca
          </a>
        </div>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/yousef-alsaqa-b1ab4822b/" target="_blank">
            <i class="bi bi-linkedin"></i>
            LinkedIn
          </a>
          <a href="https://github.com/yousefalsaqa" target="_blank">
            <i class="bi bi-github"></i>
            GitHub
          </a>
          <a href="assets/Yousef_Alsaqa_Resume.pdf" target="_blank">
            <i class="bi bi-file-earmark-text"></i>
            Resume
          </a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© 2025 Yousef Alsaqa</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    const navToggle = document.getElementById('navToggle');
    const nav = document.getElementById('nav');
    
    navToggle.addEventListener('click', () => {
      nav.classList.toggle('active');
      navToggle.classList.toggle('active');
    });

    const header = document.getElementById('header');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
  </script>
</body>
</html>
